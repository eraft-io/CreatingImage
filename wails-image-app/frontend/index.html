<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>CreatingImage</title>
</head>
<body>
<div id="app">
    <div class="container">
        <h1 class="title">CreatingImage</h1>
        <p class="subtitle">AI 图片生成器 - 基于 Stable Diffusion XL</p>
        
        <div id="env-status" class="env-status hidden">
            <div class="status-indicator"></div>
            <span id="status-text">准备中...</span>
        </div>

        <div id="install-log" class="install-log hidden">
            <div class="log-header">
                <span>安装日志</span>
                <button class="toggle-log" onclick="toggleLog()">收起</button>
            </div>
            <div id="log-content" class="log-content"></div>
        </div>

        <div class="input-section">
            <textarea 
                id="prompt-input" 
                class="prompt-input" 
                placeholder="请输入图片描述，例如：一只坐在云朵上的猫，8k，超写实风格..."
                rows="3"
            ></textarea>
            
            <!-- 高级选项 -->
            <div class="advanced-options">
                <div class="option-toggle" onclick="toggleAdvancedOptions()">
                    <span>高级选项</span>
                    <span id="advanced-toggle-icon">▼</span>
                </div>
                <div id="advanced-panel" class="advanced-panel hidden">
                    <div class="option-row">
                        <div class="option-group">
                            <label for="steps-input">推理步数:</label>
                            <input type="number" id="steps-input" value="20" min="10" max="50">
                            <span class="option-hint">(越少越快)</span>
                        </div>
                        <div class="option-group">
                            <label for="guidance-scale-input">引导系数:</label>
                            <input type="number" id="guidance-scale-input" value="7.5" min="1" max="20" step="0.5">
                            <span class="option-hint">(越低越快)</span>
                        </div>
                    </div>
                    <div class="option-row">
                        <div class="option-group">
                            <label for="width-input">宽度:</label>
                            <select id="width-input">
                                <option value="512">512</option>
                                <option value="768">768</option>
                                <option value="1024" selected>1024</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label for="height-input">高度:</label>
                            <select id="height-input">
                                <option value="512">512</option>
                                <option value="768">768</option>
                                <option value="1024" selected>1024</option>
                            </select>
                        </div>
                    </div>
                    <div class="option-row">
                        <div class="option-group">
                            <label for="seed-input">随机种子:</label>
                            <input type="number" id="seed-input" value="" placeholder="随机">
                            <span class="option-hint">(固定值可复现)</span>
                        </div>
                    </div>
                    <div class="option-row">
                        <div class="option-group checkbox-group">
                            <label>
                                <input type="checkbox" id="optimize-speed-check">
                                速度优化 (CUDA only)
                            </label>
                        </div>
                        <div class="option-group checkbox-group">
                            <label>
                                <input type="checkbox" id="optimize-memory-check">
                                内存优化 (低内存设备)
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="generate-btn" class="generate-btn" onclick="generateImage()" disabled>
                环境准备中...
            </button>
        </div>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>正在生成图片，请稍候...</p>
        </div>

        <div id="result" class="result hidden">
            <img id="generated-image" class="generated-image" alt="生成的图片"/>
            <p id="result-message" class="result-message"></p>
            <div class="button-group">
                <button id="save-btn" class="save-btn" onclick="saveToDesktop()">
                    另存到桌面
                </button>
            </div>
        </div>

        <div id="error" class="error hidden">
            <p id="error-message"></p>
        </div>
    </div>
</div>
<script src="./src/main.js" type="module"></script>
</body>
</html>
